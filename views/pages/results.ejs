<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../style/reset.css">
    <link rel="stylesheet" href="../style/base.css">
    <link rel="stylesheet" href="../style/results-layout.css">
    <link rel="stylesheet" href="../style/modules.css">
    <script src="https://kit.fontawesome.com/4fc1b5d5ea.js" crossorigin="anonymous"></script>
    <title>Trail Explorer</title>
  </head>

  <body>
    <header>
      <%- include('../partials/header')%>
    </header>
    <main>
      <div id="user"><em>
          How about one of these trails, <span class="user-title">
            <%= userInfo %>
          </span>?
        </em></div>

      <%- include('../partials/navigation', {userInfo: userInfo}) %>
        <section id="upper-img" class="result-cards">


          <% trails.forEach((trail)=> { %>
            <%- include('../partials/trail-card', {trail: trail}) %>


              <!-- Detail modal -->

              <div id="detail-modal" class="modal">

                <div id="detail-content" class="detail-modal-content">
                  <span class="close">&times;</span>
                  <img src="<%= trail.img_url %>" alt="<%= trail.trail %>">
                  <h2>
                    <%= trail.trail %>
                  </h2>
                  <p><em>"<%= trail.summary %>"</em></p>
                  <p>Located in <%= trail.city %>, this <%= trail.difficulty %>, <%= trail.distance %> mile hike is
                          rated <%= trail.rating %> out of 5 stars.</p>
                  <a href="<%= trail.trail_url %>">
                    <%= trail.trail %> Website
                  </a>
                  <form id="trail-save" action="/search/save" method="POST">
                    <input type="hidden" name="trail_id" value="trail.trailID" />
                    <input type="hidden" name="lat" value="trail.lat" />
                    <input type="hidden" name="lon" value="trail.lon" />
                    <input type="hidden" name="trail_name" value="trail.trail" />
                    <input type="hidden" name="city" value="trail.city" />
                    <input type="hidden" name="summary" value="trail.summary" />
                    <input type="hidden" name="distance" value="trail.distance" />
                    <input type="hidden" name="rating" value="trail.rating" />
                    <input type="hidden" name="elevation" value="trail.elavation" />
                    <input type="hidden" name="difficulty" value="trail.difficulty" />
                    <input type="hidden" name="trail_url" value="trail.trail_url" />
                    <input type="hidden" name="img_url" value="trail.img_url" />
                    <input type="submit" value="Save to Favorites" id="save-btn" />
                  </form>
                </div>

              </div>
              <% }) %>
                <div class="trail-card spacer"></div>
        </section>

        <!-- Search modal -->

        <div id="search-modal" class="modal">
          <div id="search-content" class="search-modal-content">
            <form action="/search" method="GET">
              <label>Search Location
                <input type="text" name="location" />
              </label><br>
              <input type="hidden" name="userInfo" value="<%= userInfo%>">
              <input type="submit" value="Search Now" class="modal-btn" />
            </form>
            <span class="close">&times;</span>
          </div>

        </div>

    </main>
    <%- include('../partials/footer') %>
      <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="/app.js"></script>
  </body>

</html>